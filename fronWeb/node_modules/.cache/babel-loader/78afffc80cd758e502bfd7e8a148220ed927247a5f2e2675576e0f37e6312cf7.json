{"ast":null,"code":"var _jsxFileName = \"/home/antonio/RepoGitHub/Achat_vente-Tovo2/frontend/src/View/Page/Vente/DemandeProforma.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport Details from \"./DetailsProforma\";\nimport CreateProforma from \"./CreateProforma\";\nimport Listes from \"./Listes\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Proforma = () => {\n  _s();\n  // class DetailsProforma {\n  //   rubrique;\n  //   article;\n  //   qtt;\n  //   qualite;\n  //   methode;\n  //   pu_30;\n  // }\n\n  class Proforma {}\n  const [articles, setArticles] = useState([]);\n  const [rubriques, setRubriques] = useState([]);\n  const [listes, setListes] = useState([]);\n  const [mode, setMode] = useState([]);\n  const [proforma, setProforma] = useState();\n  const [listMethode, setListMethode] = useState([]);\n  const marge = useRef();\n  const acompte = useRef();\n  const date = useRef();\n  const lieuLivraison = useRef();\n  const rubrique = useRef();\n  const article = useRef();\n  const qt = useRef();\n  const methode = useRef();\n  const qualite = useRef();\n  const modeLivraison = useRef();\n  useEffect(() => {\n    var content = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    fetch(\"http://127.0.0.1:3000/datacreatingProforma\", content).then(response => response.json()).then(json => {\n      setArticles(json.articles);\n      setRubriques(json.rubriques);\n      setMode(json.modeLivraison);\n      setListMethode(json.methode);\n    });\n  }, []);\n  const createProforma = detailsproforma => {\n    detailsproforma.rubrique = rubrique.current.value;\n    detailsproforma.article = article.current.value;\n    detailsproforma.pu_30 = 0;\n    detailsproforma.qtt = qt.current.value;\n    detailsproforma.methode = methode.current;\n    detailsproforma.qualite = qualite.current.value;\n    return detailsproforma;\n  };\n  const addListes = proforma => {\n    setListes([...listes, proforma]);\n  };\n  const manageStock = detailProforma => {\n    var content = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    content.body = JSON.stringify(detailProforma);\n    fetch(\"http://127.0.0.1:3000/manageStock\", content).then(response => response.json()).then(json => {\n      if (\"error\" in json) {\n        console.log(json);\n        alert(json.error);\n      } else {\n        detailProforma.pu_30 = json.pu + json.pu * (proforma.marge / 100);\n        console.log(\"Return data\");\n        console.log(detailProforma);\n        addListes(detailProforma);\n      }\n    });\n  };\n  const handleClick = event => {\n    event.preventDefault();\n    var proforma = new Proforma();\n    proforma = createProforma(proforma);\n    manageStock(proforma);\n  };\n  const sendData = () => {\n    var content = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    content.body = JSON.stringify({\n      proforma: {\n        acompte: proforma.acompte,\n        date_livraison: proforma.date_livraison,\n        lieu_livraison: proforma.lieu_livraison,\n        mode_livraison_id: proforma.mode_livraison_id\n      },\n      details: listes\n    });\n    console.log(content);\n    fetch(\"http://127.0.0.1:3000/createProforma\", content).then(response => response.json()).then(json => {\n      if (\"error\" in json) alert(json.error);\n    });\n  };\n  const handleForm = event => {\n    event.preventDefault();\n    sendData();\n  };\n  const create = () => {\n    const proforma = new Proforma();\n    proforma.acompte = acompte.current.value;\n    proforma.marge = marge.current.value;\n    proforma.date_livraison = date.current.value;\n    proforma.lieu_livraison = lieuLivraison.current.value;\n    proforma.mode_livraison_id = modeLivraison.current.value;\n    setProforma(proforma);\n  };\n  const handleCreate = event => {\n    event.preventDefault();\n    create();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(CreateProforma, {\n      marge: marge,\n      acompte: acompte,\n      mode: mode,\n      date: date,\n      lieuLivraison: lieuLivraison,\n      modeLivraison: modeLivraison\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"btn btn-primary\",\n      type: \"button\",\n      value: \"Creer\",\n      onClick: handleCreate\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Details, {\n      listMethode: listMethode,\n      rubriques: rubriques,\n      articles: articles,\n      rubrique: rubrique,\n      article: article,\n      methode: methode,\n      qt: qt,\n      setArticles: setArticles,\n      qualite: qualite\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"btn btn-primary\",\n      type: \"button\",\n      value: \"Ajouter\",\n      onClick: handleClick\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      className: \"btn btn-primary\",\n      type: \"button\",\n      value: \"Valider\",\n      onClick: handleForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Listes, {\n      listMethode: listMethode,\n      listes: listes,\n      rubriques: rubriques,\n      articles: articles\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n};\n_s(Proforma, \"rD72+nq3JCnHkmCJwpMQv1qh9tk=\");\n_c = Proforma;\nexport default Proforma;\nvar _c;\n$RefreshReg$(_c, \"Proforma\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Details","CreateProforma","Listes","Proforma","articles","setArticles","rubriques","setRubriques","listes","setListes","mode","setMode","proforma","setProforma","listMethode","setListMethode","marge","acompte","date","lieuLivraison","rubrique","article","qt","methode","qualite","modeLivraison","content","method","headers","fetch","then","response","json","createProforma","detailsproforma","current","value","pu_30","qtt","addListes","manageStock","detailProforma","body","JSON","stringify","console","log","alert","error","pu","handleClick","event","preventDefault","sendData","date_livraison","lieu_livraison","mode_livraison_id","details","handleForm","create","handleCreate"],"sources":["/home/antonio/RepoGitHub/Achat_vente-Tovo2/frontend/src/View/Page/Vente/DemandeProforma.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport Details from \"./DetailsProforma\";\nimport CreateProforma from \"./CreateProforma\";\nimport Listes from \"./Listes\";\n\nconst Proforma = () => {\n  // class DetailsProforma {\n  //   rubrique;\n  //   article;\n  //   qtt;\n  //   qualite;\n  //   methode;\n  //   pu_30;\n  // }\n\n  class Proforma {\n    marge;\n    acompte;\n    date_livraison;\n    lieu_livraison;\n    mode_livraison_id;\n  }\n\n  const [articles, setArticles] = useState([]);\n  const [rubriques, setRubriques] = useState([]);\n  const [listes, setListes] = useState([]);\n  const [mode, setMode] = useState([]);\n  const [proforma, setProforma] = useState();\n  const [listMethode, setListMethode] = useState([]);\n\n  const marge = useRef();\n  const acompte = useRef();\n  const date = useRef();\n  const lieuLivraison = useRef();\n  const rubrique = useRef();\n  const article = useRef();\n  const qt = useRef();\n  const methode = useRef();\n  const qualite = useRef();\n  const modeLivraison = useRef();\n\n  useEffect(() => {\n    var content = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    fetch(\"http://127.0.0.1:3000/datacreatingProforma\", content)\n      .then((response) => response.json())\n      .then((json) => {\n        setArticles(json.articles);\n        setRubriques(json.rubriques);\n        setMode(json.modeLivraison);\n        setListMethode(json.methode);\n      });\n  }, []);\n\n  const createProforma = (detailsproforma) => {\n    detailsproforma.rubrique = rubrique.current.value;\n    detailsproforma.article = article.current.value;\n    detailsproforma.pu_30 = 0;\n    detailsproforma.qtt = qt.current.value;\n    detailsproforma.methode = methode.current;\n    detailsproforma.qualite = qualite.current.value;\n\n    return detailsproforma;\n  };\n\n  const addListes = (proforma) => {\n    setListes([...listes, proforma]);\n  };\n\n  const manageStock = (detailProforma) => {\n    var content = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    content.body = JSON.stringify(detailProforma);\n\n    fetch(\"http://127.0.0.1:3000/manageStock\", content)\n      .then((response) => response.json())\n      .then((json) => {\n        if (\"error\" in json) {\n          console.log(json);\n          alert(json.error);\n        } else {\n          detailProforma.pu_30 = json.pu + json.pu * (proforma.marge / 100);\n          console.log(\"Return data\");\n          console.log(detailProforma);\n          addListes(detailProforma);\n        }\n      });\n  };\n\n  const handleClick = (event) => {\n    event.preventDefault();\n    var proforma = new Proforma();\n    proforma = createProforma(proforma);\n    manageStock(proforma);\n  };\n\n  const sendData = () => {\n    var content = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n    content.body = JSON.stringify({\n      proforma: {\n        acompte: proforma.acompte,\n        date_livraison: proforma.date_livraison,\n        lieu_livraison: proforma.lieu_livraison,\n        mode_livraison_id: proforma.mode_livraison_id,\n      },\n      details: listes,\n    });\n    console.log(content);\n    fetch(\"http://127.0.0.1:3000/createProforma\", content)\n      .then((response) => response.json())\n      .then((json) => {\n        if (\"error\" in json) alert(json.error);\n      });\n  };\n\n  const handleForm = (event) => {\n    event.preventDefault();\n    sendData();\n  };\n\n  const create = () => {\n    const proforma = new Proforma();\n\n    proforma.acompte = acompte.current.value;\n    proforma.marge = marge.current.value;\n    proforma.date_livraison = date.current.value;\n    proforma.lieu_livraison = lieuLivraison.current.value;\n    proforma.mode_livraison_id = modeLivraison.current.value;\n\n    setProforma(proforma);\n  };\n\n  const handleCreate = (event) => {\n    event.preventDefault();\n    create();\n  };\n\n  return (\n    <div>\n      <CreateProforma\n        marge={marge}\n        acompte={acompte}\n        mode={mode}\n        date={date}\n        lieuLivraison={lieuLivraison}\n        modeLivraison={modeLivraison}\n      />\n\n      <input\n        className=\"btn btn-primary\"\n        type=\"button\"\n        value=\"Creer\"\n        onClick={handleCreate}\n      />\n\n      <Details\n        listMethode={listMethode}\n        rubriques={rubriques}\n        articles={articles}\n        rubrique={rubrique}\n        article={article}\n        methode={methode}\n        qt={qt}\n        setArticles={setArticles}\n        qualite={qualite}\n      />\n\n      <input\n        className=\"btn btn-primary\"\n        type=\"button\"\n        value=\"Ajouter\"\n        onClick={handleClick}\n      />\n\n      <input\n        className=\"btn btn-primary\"\n        type=\"button\"\n        value=\"Valider\"\n        onClick={handleForm}\n      />\n\n      <br />\n      <Listes\n        listMethode={listMethode}\n        listes={listes}\n        rubriques={rubriques}\n        articles={articles}\n      />\n    </div>\n  );\n};\n\nexport default Proforma;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}